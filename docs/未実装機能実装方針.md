# RemindFlow 未実装機能実装方針

## 概要
RemindFlowプロジェクトの精査結果に基づき、UIは存在するが機能が未実装の箇所とその実装方針をまとめました。

## 1. 設定画面機能

### 現状（更新）
- 設定画面コンポーネント `SettingsModal.jsx` を追加済み
- ヘッダーおよびダッシュボードから起動可能

### 実装方針
1. **設定画面コンポーネントの作成**
   - `src/components/Settings/SettingsModal.jsx`を作成
   - 通知設定、表示設定、データ管理の3つのタブで構成

2. **実装した機能**
   - 通知設定（有効/無効、デフォルト通知時間、通知音）
   - 表示設定（テーマ、フォントサイズ）
   - データ管理（CSVエクスポート、JSONバックアップ/インポート）

3. **実装手順**
   ```javascript
   // App.jsxの修正
   const [settingsOpen, setSettingsOpen] = useState(false);
   
   const handleSettingsOpen = () => {
     setSettingsOpen(true);
   };
   ```

## 2. 通知機能の完全実装

### 現状（更新）
- `useNotifications.js`/`notifications.ts` 実装済み
- 通知ON/OFF切り替えを設定モーダルから利用可能
- 通知音ファイルは未同梱（`public/sounds/*.mp3` 配置で有効化）

### 実装方針
1. **通知音ファイルの追加**
   - `public/sounds/`ディレクトリを作成
   - `chime.mp3`, `bell.mp3`, `notification.mp3`を配置

2. **通知状態の視覚化**
   - ヘッダーの通知アイコンに未読通知数の表示
   - 通知履歴の表示機能

3. **実装手順**
   ```javascript
   // 通知音ファイルの配置
   public/sounds/
   ├── chime.mp3
   ├── bell.mp3
   └── notification.mp3
   ```

## 3. 繰り返し予定の生成機能

### 現状（更新）
- `App.jsx` の保存処理で、終了日指定がある繰り返し予定を自動生成

### 実装方針（結果）
1. **繰り返し予定の自動生成**
   - 予定保存時に繰り返し設定をチェックし、終了日まで自動生成（実装済み）

2. **実装手順**
   ```javascript
   // ScheduleForm.jsxの修正
   const handleSubmit = (e) => {
     // 既存の処理...
     
     if (formData.recurrence.type !== 'none') {
       const recurringSchedules = generateRecurringSchedules(
         scheduleData, 
         formData.recurrence.endDate
       );
       recurringSchedules.forEach(schedule => addSchedule(schedule));
     }
   };
   ```

## 4. データエクスポート/インポート機能

### 現状（更新）
- 設定モーダルからCSVエクスポート、JSONバックアップ/インポートが可能

### 実装方針
1. **エクスポート機能**
   - CSV形式でのエクスポート
   - JSON形式でのバックアップエクスポート

2. **インポート機能**
   - CSV/JSONファイルの読み込み
   - データの検証とマージ

3. **実装手順**
   ```javascript
   // SettingsModal.jsxに追加
   const handleExport = () => {
     const csvData = exportToCSV(schedules);
     const blob = new Blob([csvData], { type: 'text/csv' });
     const url = URL.createObjectURL(blob);
     const a = document.createElement('a');
     a.href = url;
     a.download = `schedules_${new Date().toISOString().split('T')[0]}.csv`;
     a.click();
   };
   ```

## 5. 検索・フィルタリング機能の改善

### 現状
- 基本的な検索・フィルタリングは実装済み
- 高度な検索機能（日付範囲、複数条件）が未実装

### 実装方針
1. **高度な検索機能**
   - 日付範囲での検索
   - 複数条件でのAND/OR検索
   - 保存された検索条件

2. **実装手順**
   ```javascript
   // ListView.jsxの拡張
   const [advancedFilters, setAdvancedFilters] = useState({
     dateRange: { start: '', end: '' },
     searchMode: 'AND' // 'AND' or 'OR'
   });
   ```

## 6. ダッシュボードのクイックアクション

### 現状（更新）
- ダッシュボードの「カレンダー表示」「通知設定」ボタンを実装済み

### 実装方針（結果）
1. **クイックアクションの実装**
   - カレンダー表示ボタンでビュー切り替え（実装済み）
   - 通知設定ボタンで設定画面を開く（実装済み）

## 9. 追加実装（本ドキュメント初版以降）

- 終了時間の入力とバリデーションを追加
- 予定の完了ステータス（pending/completed）とトグル操作を追加
- 一覧にステータスフィルタを追加
- ヘッダーの通知メニューと赤ドット表示条件を追加
- CSV項目に開始/終了時間とステータスを追加

2. **実装手順**
   ```javascript
   // Dashboard.jsxの修正
   <Button 
     variant="outline" 
     className="h-20 flex-col space-y-2"
     onClick={() => onViewChange('calendar')}
   >
     <Calendar className="h-6 w-6" />
     <span>カレンダー表示</span>
   </Button>
   ```

## 7. レスポンシブデザインの改善

### 現状
- 基本的なレスポンシブデザインは実装済み
- モバイルでの操作性に改善の余地

### 実装方針
1. **モバイル最適化**
   - タッチ操作の改善
   - モバイル専用のUI調整

2. **実装手順**
   - タッチフレンドリーなボタンサイズの調整
   - スワイプジェスチャーの追加検討

## 8. エラーハンドリングの強化

### 現状
- 基本的なエラーハンドリングは実装済み
- ユーザーフレンドリーなエラーメッセージが不十分

### 実装方針
1. **エラーメッセージの改善**
   - 日本語での分かりやすいエラーメッセージ
   - エラー時の復旧手順の提示

2. **実装手順**
   ```javascript
   // エラーメッセージの統一
   const ERROR_MESSAGES = {
     STORAGE_FULL: 'ストレージの容量が不足しています。古いデータを削除してください。',
     NETWORK_ERROR: 'ネットワークエラーが発生しました。しばらく待ってから再試行してください。'
   };
   ```

## 実装優先度（更新）

### 高優先度
1. 通知履歴/未読バッジ表示（視覚的フィードバック）
2. 通知音ファイルの同梱またはCDN提供
3. 高度検索（AND/OR・日付範囲保存）

### 中優先度
4. icsエクスポート/インポート対応
5. レスポンシブ操作性の微調整

### 低優先度
6. 検索・フィルタリング機能の改善
7. レスポンシブデザインの改善
8. エラーハンドリングの強化

## 実装時の注意点

1. **既存コードとの整合性**
   - 既存の型定義（`types/index.ts`）を活用
   - 既存のフック（`useSchedules`, `useNotifications`）を拡張

2. **ユーザビリティ**
   - 日本語での分かりやすいUI
   - 直感的な操作性

3. **パフォーマンス**
   - 大量データでの動作確認
   - メモリリークの防止

4. **テスト**
   - 各機能の単体テスト
   - 統合テストの実施

## 完了後の期待効果

1. **機能の完全性**
   - 予定管理アプリとして必要な機能が全て実装される
   - ユーザーが期待する機能が提供される

2. **ユーザビリティの向上**
   - 直感的で使いやすいインターフェース
   - 効率的な予定管理が可能

3. **保守性の向上**
   - 適切なエラーハンドリング
   - 拡張しやすいコード構造
